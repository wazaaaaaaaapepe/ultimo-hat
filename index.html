<!DOCTYPE html>
<html>
<head>
  <title>Último Hat LIMITED Publicado</title>
</head>
<body>
  <h1>Último hat LIMITED publicado en Roblox</h1>
  <div id="hatInfo">Cargando...</div>

  <script>
    fetch("https://catalog.roproxy.com/v1/search/items/details?Category=11&SortType=3&Limit=30")
      .then(response => {
        if (!response.ok) throw new Error('Error en la respuesta de la API: ' + response.status);
        return response.json();
      })
      .then(data => {
        if (!data.data || data.data.length === 0) throw new Error('No se encontraron accesorios');

        // Filtrar solo los que son Limited o Limited Unique
        const limiteds = data.data.filter(item => item.isLimited || item.isLimitedUnique);

        if (limiteds.length === 0) {
          document.getElementById("hatInfo").innerText = "No se encontraron accesorios Limited recientemente.";
          return;
        }

        const hat = limiteds[0]; // El primero de los Limited encontrados
        const thumbnail = hat.thumbnail?.url || "https://www.roblox.com/favicon.ico";

        const html = `
          <p><strong>Nombre:</strong> ${hat.name}</p>
          <p><strong>Precio:</strong> ${hat.price || "Gratis"}</p>
          <p><strong>Tipo:</strong> ${hat.isLimitedUnique ? "Limited Unique" : "Limited"}</p>
          <p><a href="https://www.roblox.com/catalog/${hat.id}" target="_blank">Ver en Roblox</a></p>
          <img src="${thumbnail}" width="150">
        `;

        document.getElementById("hatInfo").innerHTML = html;
      })
      .catch(error => {
        document.getElementById("hatInfo").innerText = "Error: " + error.message;
        console.error(error);
      });
  </script>
</body>
