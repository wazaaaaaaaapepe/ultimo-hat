<!DOCTYPE html>
<html>
<head>
  <title>Últimos UGC Limiteds Gratuitos</title>
</head>
<body>
  <h1>Últimos UGC Limiteds Gratuitos en Roblox</h1>
  <div id="itemList">Cargando...</div>

  <script>
    // Definir la URL de la API con los parámetros necesarios
    const apiUrl = "https://catalog.roproxy.com/v1/search/items/details?Category=11&SortType=3&Limit=30&SalesTypeFilter=1";

    // Realizar la solicitud a la API
    fetch(apiUrl)
      .then(response => {
        if (!response.ok) {
          throw new Error('Error en la respuesta de la API: ' + response.status);
        }
        return response.json();
      })
      .then(data => {
        if (data.data && data.data.length > 0) {
          // Filtrar los ítems que son UGC Limited y gratuitos
          const ugcLimitedsGratis = data.data.filter(item =>
            item.collectibleItemId && // Es Limited
            item.creator.hasVerifiedBadge === false && // No es de Roblox
            item.price === 0 // Es gratuito
          );

          if (ugcLimitedsGratis.length === 0) {
            throw new Error("No se encontraron UGC Limiteds gratuitos recientemente.");
          }

          // Construir el HTML para mostrar los ítems
          let htmlContent = "";
          ugcLimitedsGratis.forEach(item => {
            const thumbnailUrl = item.thumbnail?.url || 'https://www.roblox.com/favicon.ico';
            htmlContent += `
              <div style="margin-bottom: 20px;">
                <p><strong>Nombre:</strong> ${item.name}</p>
                <p><strong>Precio:</strong> Gratis</p>
                <p><strong>Link:</strong> <a href="https://www.roblox.com/catalog/${item.id}" target="_blank">Ver en Roblox</a></p>
                <img src="${thumbnailUrl}" width="150">
                <hr>
              </div>
            `;
          });

          document.getElementById("itemList").innerHTML = htmlContent;
        } else {
          throw new Error('No se encontraron datos de ítems');
        }
      })
      .catch(err => {
        document.getElementById("itemList").innerText = "Error al obtener datos: " + err.message;
        console.error(err);
      });
  </script>
</body>
</html>
