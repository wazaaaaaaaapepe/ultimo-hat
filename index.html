<script>
  fetch("https://catalog.roproxy.com/v1/search/items/details?SortType=3&Limit=10")
    .then(response => response.json())
    .then(data => {
      // Verifica si se obtienen datos y si no están vacíos
      if (data && data.data && data.data.length > 0) {
        // Filtra los items UGC
        let ugcLimited = data.data.filter(item => item.assetType === 8 && item.creatorType === "User");

        if (ugcLimited.length === 0) {
          document.getElementById("hatInfo").innerHTML = "<p>No se encontraron UGC Limiteds. Mostrando el primer artículo disponible.</p>";
          const latestItem = data.data[0]; // Si no hay UGC, muestra el primer artículo de la lista
          displayItem(latestItem);
        } else {
          const item = ugcLimited[0]; // Muestra el primer artículo UGC
          displayItem(item);
        }
      } else {
        document.getElementById("hatInfo").innerHTML = "<p>No se encontraron items.</p>";
      }
    })
    .catch(err => {
      document.getElementById("hatInfo").innerText = "Error al obtener datos";
      console.error(err);
    });

  function displayItem(item) {
    const hatHtml = `
      <p><strong>Nombre:</strong> ${item.name}</p>
      <p><strong>Precio:</strong> ${item.price || "Gratis"}</p>
      <p><strong>Link:</strong> <a href="https://www.roblox.com/catalog/${item.id}" target="_blank">Ver en Roblox</a></p>
      <img src="${item.thumbnail.url}" width="150">
    `;
    document.getElementById("hatInfo").innerHTML = hatHtml;
  }
</script>
