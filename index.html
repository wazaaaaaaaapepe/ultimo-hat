<!DOCTYPE html>
<html>
<head>
  <title>Últimos Hats LIMITED publicados</title>
</head>
<body>
  <h1>Últimos hats LIMITED publicados en Roblox</h1>
  <div id="hatInfo">Cargando...</div>

  <script>
    fetch("https://catalog.roproxy.com/v1/search/items/details?Category=11&SortType=3&Limit=100")
      .then(response => {
        if (!response.ok) throw new Error('Error en la respuesta de la API: ' + response.status);
        return response.json();
      })
      .then(data => {
        if (!data.data || data.data.length === 0) throw new Error('No se encontraron accesorios');

        // Filtrar los que son Limited o Limited Unique
        const limiteds = data.data.filter(item => item.isLimited || item.isLimitedUnique);

        if (limiteds.length === 0) {
          document.getElementById("hatInfo").innerText = "No se encontraron accesorios Limited recientemente.";
          return;
        }

        // Mostrar hasta los 5 más recientes
        const html = limiteds.slice(0, 5).map(hat => {
          const thumbnail = hat.thumbnail?.url || "https://www.roblox.com/favicon.ico";
          return `
            <div style="margin-bottom: 20px;">
              <p><strong>Nombre:</strong> ${hat.name}</p>
              <p><strong>Precio:</strong> ${hat.price || "Gratis"}</p>
              <p><strong>Tipo:</strong> ${hat.isLimitedUnique ? "Limited Unique" : "Limited"}</p>
              <p><a href="https://www.roblox.com/catalog/${hat.id}" target="_blank">Ver en Roblox</a></p>
              <img src="${thumbnail}" width="150">
            </div>
          `;
        }).join("");

        document.getElementById("hatInfo").innerHTML = html;
      })
      .catch(error => {
        document.getElementById("hatInfo").innerText = "Error: " + error.message;
        console.error(error);
      });
  </script>
</body>
</html>
